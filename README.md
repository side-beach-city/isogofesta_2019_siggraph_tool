# Siggraph Test Dockerfile

早稲田大学研究プログラムを使って白黒画像をカラー画像に変換するツールの実験コンテナ。
時間が経過しているため、他の資料に書かれているやり方ではプログラムが実行できないので一部修正・トライ＆エラーを繰り返すため省力化のためDockerコンテナ化した。

## 主な修正箇所

* torchインストーラに含まれるpython-software-propertiesをpython-software-propertiesに変更(パッケージ名が変更されたため)
* supervisorを使って起動するようにした(bashを再起動してもコンテナが落ちないようにするため)
* 外部マシンの/dockerを/outsideという名前でマウントするようにした(外部からファイルを取り込みしやすくするため)

## 使い方

1. `d_build.sh`を実行する(ディレクトリパスは高見の環境に合わせてあるので適宜変更する)
2. `d_run.sh`を実行する
3. コンテナ環境で`cd /root/siggraph2016`して、早大プログラムのディレクトリに移動
4. `th colorize.lua [入力画像] [出力画像]`を実行する
5. 十数秒後、出力画像が出力される

## その他の注意

### メモリ使用量

このプログラムにはそこそこ大量のメモリを消費する。

このため、Dockerを動作させる仮想マシンには、そこそこのメモリ容量を割り当てておくこと(高見環境では8GB割り当てした)

### 外部マシンとの連携

VirtualBoxなどのを動作させているマシン環境とデータのやりとりをしやすくするため、この環境では/dockerという共有フォルダを仮想マシンの共有フォルダとして設定している。

このため、このDockerfileを実行する前に、仮想マシンに/dockerという共有フォルダを作成しておくこと